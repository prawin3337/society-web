<app-header [dashboarName]="'User Dashboard'"></app-header>

<ion-content [fullscreen]="true">
  <mat-card>
    <mat-card-content>
      <form [formGroup]="filterForm">
        <mat-form-field style="width: 45%;">
          <mat-label>Financial Year</mat-label>
          <mat-select formControlName="financYear" [value]="'2023-2024'">
            <mat-option [value]="'2021-2022'">2021-2022</mat-option>
            <mat-option [value]="'2022-2023'">2022-2023</mat-option>
            <mat-option [value]="'2023-2024'">2023-2024</mat-option>
          </mat-select>
        </mat-form-field>
        
        <mat-form-field class="float-end" style="width: 45%;" name="flatNo" *ngIf="members.length" authDirective>
          <mat-label>Flat</mat-label>
          <mat-select formControlName="flatNo" [value]="userInfo.flatNo">
            @for (member of members; track member) {
            <mat-option [value]="member.flatNo">{{member.flatNo}}-{{member.userId}}</mat-option>
            }
          </mat-select>
        </mat-form-field>
      </form>
    </mat-card-content>
  </mat-card>

  <mat-accordion>
    <mat-expansion-panel [expanded]="true">
      <mat-expansion-panel-header>
        <mat-panel-title>
          <i class="bi bi-file-earmark-spreadsheet"></i> 
          Maintainance
        </mat-panel-title>
      </mat-expansion-panel-header>
  
      <app-show-maintainance *ngIf="userInfo.flatNo" [filter]="filter"></app-show-maintainance>
  
    </mat-expansion-panel>
  </mat-accordion>

  <mat-accordion>
    <mat-expansion-panel [expanded]="false" (opened)="panelOpenState = true" (closed)="panelOpenState = false">
      <mat-expansion-panel-header>
        <mat-panel-title>
          <i class="bi bi-cash-coin me-1"></i>
          Update transaction
        </mat-panel-title>
        <!-- <mat-panel-description>
            Currently I am {{panelOpenState ? 'open' : 'closed'}}
          </mat-panel-description> -->
      </mat-expansion-panel-header>
  
      <app-transaction *ngIf="userInfo.flatNo" [filter]="filter"></app-transaction>
  
    </mat-expansion-panel>
  </mat-accordion>

  <mat-accordion>
    <mat-expansion-panel
      [expanded]="true">
      <mat-expansion-panel-header>
        <mat-panel-title>
          <i class="bi bi-file-earmark-spreadsheet"></i>
          Transaction's
        </mat-panel-title>
      </mat-expansion-panel-header>
  
      <app-show-transactions *ngIf="userInfo.flatNo" [filter]="filter"></app-show-transactions>
  
    </mat-expansion-panel>
  </mat-accordion>
</ion-content>